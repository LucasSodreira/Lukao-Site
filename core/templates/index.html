{% extends 'base.html' %}
{% load static %}
{% block banner %}
  {% include 'banner.html' %}
{% endblock %}

{% block main %}
  <link rel="stylesheet" href="{% static 'css/index.css' %}" />
  
  <div class="center-container">
    <div class="categoria-bloco">
      <div class="categoria-header">
        <h2 class="categoria-titulo">NEW ARRIVALS</h2>
        {% comment %} <a href="{% url 'produtos-por-categoria' 0 %}" class="ver-mais">View All</a> {% endcomment %}
      </div>

      <div class="carrossel-produtos quantidade-{{ new_arrivals|length }}">
        {% for produto in produtos %}
        <div class="product-card">
          <a href="{% url 'item-view' produto.id %}" id="produto-link">
            {% if produto.imagem %}
              <img src="{{ produto.imagem.url }}" alt="{{ produto.nome }}" class="product-image" />
            {% else %}
              <img src="{% static 'images/default.png' %}" alt="Imagem não disponível" class="product-image" />
            {% endif %}
            
            <h3 class="product-title">{{ produto.nome }}</h3>
            <div class="product-rating">
              {% comment %} {% with ''|center:produto.avaliacao as range %}
                {% for _ in range %}★{% endfor %}
              {% endwith %}
              {{ produto.avaliacao }}/5 {% endcomment %}
            </div>
            <div class="product-price-container">
              <p class="product-price">
                {% if produto.preco_desconto %}
                  <span class="current-price">${{ produto.preco_desconto }}</span>
                  <span class="old-price">${{ produto.preco }}</span>
                {% else %}
                  ${{ produto.preco }}
                {% endif %}
              </p>
              <img src="{% static 'images/cart.svg' %}" id="cart-icon" />
            </div>
          </a>
        </div>
        {% endfor %}
      </div>
    </div>
    <div class="ver-mais">
      <a href="">Ver Todos</a>
    </div>

  </div>
{% endblock %}